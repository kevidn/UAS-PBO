<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Keranjang Belanja</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h2>Keranjang Belanja</h2>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Brand</th>
                <th>Model</th>
                <th>Harga</th>
                <th>Jumlah</th>
                <th>Subtotal</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="item : ${cartItems}">
                <td th:text="${item.phone.brand}"></td>
                <td th:text="${item.phone.model}"></td>
                <td th:text="${#numbers.formatDecimal(item.phone.price, 2, 'POINT', ',', 'USD')}"></td>
                <td th:text="${item.quantity}"></td>
                <td th:text="${#numbers.formatDecimal(item.subtotal, 2, 'POINT', ',', 'USD')}"></td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td colspan="4" class="text-end"><strong>Total</strong></td>
                <td>
                    <strong th:text="${#numbers.formatDecimal(${cartItems}.![subtotal].stream().reduce(0.0, (a,b) -> a + b), 2, 'POINT', ',', 'USD')}"></strong>
                </td>
            </tr>
        </tfoot>
    </table>

    <a href="/phones" class="btn btn-primary">Lanjutkan Belanja</a>
    <a href="#" class="btn btn-success">Checkout</a>
</div>
</body>
</html>
